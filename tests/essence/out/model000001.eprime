language ESSENCE' 1.0

letting l be 3
find s_ExplicitBounded_Length: int(3)
find s_ExplicitBounded_Values: matrix indexed by [int(1..3)] of int(1..3)
branching on [s_ExplicitBounded_Length, s_ExplicitBounded_Values]
such that
    and([sum([toInt(s_ExplicitBounded_Values[i] = e /\ i <= 3) | i : int(1..3)]) <=
         sum([sum([1 | 1 = e]), sum([3 | 2 = e]), sum([2 | 3 = e]); int(1..3)])
         /\ or([1 = e, 2 = e, 3 = e; int(1..3)])
         /\ s_ExplicitBounded_Values[2] = 2
         /\
         sum([toInt((2 = s_ExplicitBounded_Values[i] \/ 3 = s_ExplicitBounded_Values[i]) /\ i <= 3) | i : int(1..3)]) <=
         2   | e : int(1..3)])

$ Conjure's
$ {"finds": [{"Name": "s"}],
$  "givens": [],
$  "enumGivens": [],
$  "enumLettings": [{"LettingDomainDefnEnum": [{"Name": "mul"}, [{"Name": "e1"}, {"Name": "e2"}, {"Name": "e3"}]]}],
$  "lettings":
$      [[{"Name": "n"}, {"Constant": {"ConstantInt": [{"TagInt": []}, 3]}}],
$       [{"Name": "l"}, {"Constant": {"ConstantInt": [{"TagInt": []}, 3]}}],
$       [{"Name": "mul"},
$        {"Domain":
$             {"DomainInt":
$                  [{"TagEnum": "mul"},
$                   [{"RangeBounded":
$                         [{"Constant": {"ConstantInt": [{"TagEnum": "mul"}, 1]}},
$                          {"Constant": {"ConstantInt": [{"TagEnum": "mul"}, 3]}}]}]]}}],
$       [{"Name": "pf"},
$        {"AbstractLiteral":
$             {"AbsLitSet":
$                  [{"Constant": {"ConstantInt": [{"TagEnum": "mul"}, 2]}},
$                   {"Constant": {"ConstantInt": [{"TagEnum": "mul"}, 3]}}]}}],
$       [{"Name": "f"},
$        {"AbstractLiteral":
$             {"AbsLitFunction":
$                  [[{"Constant": {"ConstantInt": [{"TagEnum": "mul"}, 1]}},
$                    {"Constant": {"ConstantInt": [{"TagInt": []}, 1]}}],
$                   [{"Constant": {"ConstantInt": [{"TagEnum": "mul"}, 2]}},
$                    {"Constant": {"ConstantInt": [{"TagInt": []}, 3]}}],
$                   [{"Constant": {"ConstantInt": [{"TagEnum": "mul"}, 3]}},
$                    {"Constant": {"ConstantInt": [{"TagInt": []}, 2]}}]]}}]],
$  "unnameds": [],
$  "strategyQ": {"PickFirst": []},
$  "strategyA": {"Compact": []},
$  "trailCompact":
$      [[1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1],
$       [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1],
$       [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1],
$       [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1],
$       [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1],
$       [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1],
$       [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1],
$       [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1],
$       [1, 1, 1]],
$  "trailVerbose": [],
$  "trailRewrites": [],
$  "nameGenState": [["q", 6]],
$  "nbExtraGivens": 0,
$  "representations":
$      [[{"Name": "s"},
$        {"DomainSequence":
$             [{"Sequence_ExplicitBounded": []},
$              [{"SizeAttr_Size":
$                    {"Reference": [{"Name": "l"}, {"Alias": {"Constant": {"ConstantInt": [{"TagInt": []}, 3]}}}]}},
$               "JectivityAttr_None"],
$              {"DomainInt":
$                   [{"TagEnum": "mul"},
$                    [{"RangeBounded":
$                          [{"Constant": {"ConstantInt": [{"TagEnum": "mul"}, 1]}},
$                           {"Constant": {"ConstantInt": [{"TagEnum": "mul"}, 3]}}]}]]}]}]],
$  "representationsTree":
$      [[{"Name": "s"},
$        [{"rootLabel": {"Sequence_ExplicitBounded": []},
$          "subForest":
$              [{"rootLabel": null,
$                "subForest": []}]}]]],
$  "originalDomains":
$      [[{"Name": "s"},
$        {"DomainSequence":
$             [[], [{"SizeAttr_Size": {"Reference": [{"Name": "l"}, null]}}, "JectivityAttr_None"],
$              {"DomainEnum": [{"Name": "mul"}, null, null]}]}]],
$  "questionAnswered": []}
